var Tt=Object.defineProperty,wt=Object.defineProperties;var xt=Object.getOwnPropertyDescriptors;var Ze=Object.getOwnPropertySymbols;var Et=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable;var Qe=(e,o,t)=>o in e?Tt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,H=(e,o)=>{for(var t in o||(o={}))Et.call(o,t)&&Qe(e,t,o[t]);if(Ze)for(var t of Ze(o))bt.call(o,t)&&Qe(e,t,o[t]);return e},fe=(e,o)=>wt(e,xt(o));var ue=(e,o,t)=>new Promise((r,s)=>{var v=d=>{try{h(t.next(d))}catch(p){s(p)}},i=d=>{try{h(t.throw(d))}catch(p){s(p)}},h=d=>d.done?r(d.value):Promise.resolve(d.value).then(v,i);h((t=t.apply(e,o)).next())});import{n as ze,a1 as ut,cH as Lt,aE as Be,cI as N,b8 as Re,a7 as kt,d as Z,b7 as me,m as Ce,a0 as D,o as y,c as P,b as Ve,F as ae,s as ie,ap as ne,ao as q,u as l,a5 as _e,q as $,j as ee,aw as dt,E as B,w as T,G as de,aq as Xe,ar as Ee,as as Ne,at as pt,a6 as J,$ as ft,p as We,a8 as et,L as ce,bf as vt,r as O,cJ as Mt,Z as ke,l as G,cK as tt,A as Me,B as De,e as w,g as Dt,f as ge,t as se,aQ as $t,cv as X,cw as F,cr as It,cL as Rt,aD as Ot,cM as Ut,a9 as Ht,cN as At,C as Pt,ac as ot,Q as Oe,R as Ue,bc as Yt,N as Bt,cO as Xt,b3 as Nt,O as Gt,b1 as Kt,S as we,aC as He,bk as Ft}from"./index-232a8936.js";import{u as qe,d as zt}from"./index-cc7bf315.js";import{u as te,f as W,g as k,h as xe,a as Vt}from"./chartEditStore-45e70a9f.js";import{e as Wt,S as qt}from"./index-81daa372.js";import{a as jt}from"./useKeyboard.hook-a7f84a08.js";import{a as Jt,b as st,l as Zt,g as Qt}from"./plugin-0e60a394.js";import{l as be}from"./lodash-b5580029.js";import{C as eo}from"./index-93bcd10b.js";import{u as ht,C as _t}from"./chartLayoutStore-b1ae0ff3.js";import{i as pe}from"./icon-b66964c1.js";import{G as to}from"./index.vue_vue_type_script_setup_true_lang-1e387b84.js";import{F as nt}from"./fileTypeEnum-21359a08.js";import{u as oo,a as so}from"./useSyncUpdate.hook-ec30cf8c.js";import"./index-6fa0c8b2.js";import"./SettingItem-2752cac5.js";/* empty css                                                                       */import"./SettingItemBox-ba5c9333.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-bbd36025.js";import"./index.esm.min-94a18cbf.js";import"./http-e7ed94fe.js";const ve=te(),no=e=>{let o=()=>{};ze(()=>ue(void 0,null,function*(){ve.setEditCanvas(W.EDIT_LAYOUT_DOM,document.getElementById("go-chart-edit-layout")),ve.setEditCanvas(W.EDIT_CONTENT_DOM,document.getElementById("go-chart-edit-content")),yield e(),o=ve.listenerScale()})),ut(()=>{ve.setEditCanvas(W.EDIT_LAYOUT_DOM,null),ve.setEditCanvas(W.EDIT_CONTENT_DOM,null),o()})},C=te(),{onClickOutSide:ao}=qe(),ro=e=>ue(void 0,null,function*(){e.preventDefault();try{Jt();const o=e.dataTransfer.getData(Lt.DRAG_KEY);if(!o){st();return}C.setEditCanvas(W.IS_CREATE,!1);const t=Be(o);if(t.disabled)return;let r=yield Wt(t);t.redirectComponent&&(t.dataset&&(r.option.dataset=t.dataset),r.chartConfig.title=t.title,r.chartConfig.chartFrame=t.chartFrame),N(r,e.offsetX-r.attr.w/2,e.offsetY-r.attr.h/2),C.addComponentList(r,!1,!0),C.setTargetSelectChart(r.id),st()}catch(o){Zt(),window.$message.warning("å›¾è¡¨æ­£åœ¨ç ”å‘ä¸­, æ•¬è¯·æœŸå¾…...")}}),at=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")},gt=(e,o)=>{if(o){C.setTargetSelectChart(o.id);return}C.setTargetSelectChart(void 0)},co=(e,o)=>{var p;if(e.which==2||(p=window.$KeyboardActive)!=null&&p.space)return;gt();const t=e.offsetX,r=e.offsetY,s=e.screenX,v=e.screenY,i=C.getEditCanvas.scale;C.setMousePosition(void 0,void 0,t,r);const h=be.throttle(f=>{C.setTargetSelectChart(),C.setEditCanvas(W.IS_SELECT,!0);const a=t+f.screenX-s,n=r+f.screenY-v;C.setMousePosition(a,n);const u={x1:0,y1:0,x2:0,y2:0};a>t&&n>r?(u.x1=t,u.y1=r,u.x2=Math.round(t+(f.screenX-s)/i),u.y2=Math.round(r+(f.screenY-v)/i)):a>t&&n<r?(u.x1=t,u.y1=Math.round(r-(v-f.screenY)/i),u.x2=Math.round(t+(f.screenX-s)/i),u.y2=r):a<t&&n>r?(u.x1=Math.round(t-(s-f.screenX)/i),u.y1=r,u.x2=t,u.y2=Math.round(r+(f.screenY-v)/i)):(u.x1=Math.round(t-(s-f.screenX)/i),u.y1=Math.round(r-(v-f.screenY)/i),u.x2=t,u.y2=r),C.getComponentList.forEach(c=>{if(!C.getTargetChart.selectId.includes(c.id)){const{x:_,y:x,w:S,h:L}=c.attr,E={x1:_,y1:x,x2:_+S,y2:x+L};E.x1-u.x1>=0&&E.y1-u.y1>=0&&E.x2-u.x2<=0&&E.y2-u.y2<=0&&!c.status.lock&&!c.status.hide&&C.setTargetSelectChart(c.id,!0)}})},30),d=()=>{h.cancel(),C.setEditCanvas(W.IS_SELECT,!1),C.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",d)},mt=()=>({mouseClickHandle:(s,v)=>{var i;if(s.preventDefault(),s.stopPropagation(),!v.status.lock&&(i=window.$KeyboardActive)!=null&&i.ctrl)if(C.targetChart.selectId.includes(v.id)){const h=C.targetChart.selectId.filter(d=>d!==v.id);C.setTargetSelectChart(h)}else C.setTargetSelectChart(v.id,!0)},mousedownHandle:(s,v)=>{var x;if(s.preventDefault(),s.stopPropagation(),v.status.lock||(ao(),s.buttons===Re.LEFT&&((x=window.$KeyboardActive)!=null&&x.ctrl)))return;const i=C.getTargetChart.selectId;if(s.buttons===Re.RIGHT&&i.length>1&&i.includes(v.id)||(C.setTargetSelectChart(v.id),s.buttons===Re.RIGHT))return;const h=C.getEditCanvas.scale,d=C.getEditCanvasConfig.width,p=C.getEditCanvasConfig.height,f=new Map;C.getTargetChart.selectId.forEach(S=>{const L=C.fetchTargetIndex(S);if(L!==-1){const{x:E,y:b,w:Y,h:K}=kt(C.getComponentList[L]).attr;f.set(S,{x:E,y:b,w:Y,h:K})}});const a=s.screenX,n=s.screenY;let u=[];C.getTargetChart.selectId.forEach(S=>{if(!f.has(S))return;const L=C.fetchTargetIndex(S);u.push(be.cloneDeep(C.getComponentList[L]))}),C.setMousePosition(void 0,void 0,a,n);const c=be.throttle(S=>{C.setEditCanvas(W.IS_DRAG,!0),C.setMousePosition(S.screenX,S.screenY);let L=(S.screenX-a)/h,E=(S.screenY-n)/h;C.getTargetChart.selectId.forEach(b=>{if(!f.has(b))return;const Y=C.fetchTargetIndex(b),{x:K,y:oe,w:A,h:m}=f.get(b),I=C.getComponentList[Y];let g=Math.round(K+L),M=Math.round(oe+E);const R=50;g=g<-A+R?-A+R:g,M=M<-m+R?-m+R:M,g=g>d-R?d-R:g,M=M>p-R?p-R:M,I&&(I.attr=Object.assign(I.attr,{x:g,y:M}))})},20),_=()=>{try{C.setMousePosition(0,0,0,0),C.setEditCanvas(W.IS_DRAG,!1),u.length&&(C.getTargetChart.selectId.forEach(S=>{if(!f.has(S))return;const L=C.fetchTargetIndex(S),E=C.getComponentList[L];u.forEach(b=>{b.id===S&&(b.attr=Object.assign(b.attr,{offsetX:E.attr.x-b.attr.x,offsetY:E.attr.y-b.attr.y}))})}),C.moveComponentList(u)),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",_)}catch(S){console.log(S)}};document.addEventListener("mousemove",c),document.addEventListener("mouseup",_)},mouseenterHandle:(s,v)=>{s.preventDefault(),s.stopPropagation(),C.getEditCanvas.isSelect||C.setTargetHoverChart(v.id)},mouseleaveHandle:(s,v)=>{s.preventDefault(),s.stopPropagation(),C.setEditCanvas(W.IS_DRAG,!1),C.setTargetHoverChart(void 0)}}),lo=(e,o,t)=>{e.stopPropagation(),e.preventDefault(),C.setEditCanvas(W.IS_DRAG,!0);const r=C.getEditCanvas.scale,s=t.x,v=t.y,i=t.w,h=t.h,d=e.screenX,p=e.screenY;C.setMousePosition(d,p);const f=be.throttle(n=>{C.setMousePosition(n.screenX,n.screenY);let u=Math.round((n.screenX-d)/r),c=Math.round((n.screenY-p)/r);const _=/t/.test(o),x=/b/.test(o),S=/l/.test(o),L=/r/.test(o),E=h+(_?-c:x?c:0),b=i+(S?-u:L?u:0);t.h=E>0?E:0,t.w=b>0?b:0,t.x=s+(S?u:0),t.y=v+(_?c:0)},50),a=()=>{C.setEditCanvas(W.IS_DRAG,!1),C.setMousePosition(0,0,0,0),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",f),document.addEventListener("mouseup",a)},Le=(e,o)=>e?{zIndex:o+1,left:`${e.x}px`,top:`${e.y}px`}:{},le=(e,o)=>e?{width:`${o?o*e.w:e.w}px`,height:`${o?o*e.h:e.h}px`}:{},io=(e,o,t,r)=>{const{w:s,h:v}=t,i=/t/.test(e),h=/b/.test(e),d=/l/.test(e),p=/r/.test(e);let f=0,a=0;return e.length===2?(f=d?0:s,a=i?0:v):((i||h)&&(f=s/2,a=i?0:v),(d||p)&&(f=d?0:s,a=Math.floor(v/2))),{left:`${f}px`,top:`${a}px`,cursor:r[o]+"-resize"}},uo=["onMousedown"],po=Z({__name:"index",props:{item:{type:Object,required:!0},hiddenPoint:{type:Boolean,required:!1}},setup(e){const o=e;me(a=>({"2d925dfa":i.value}));const t=Ce(),r=te(),s=["t","r","b","l","lt","rt","lb","rb"],v=["n","e","s","w","nw","ne","sw","se"],i=D(()=>t.getAppTheme),h=D(()=>r.getEditCanvas[W.IS_DRAG]||o.item.status.lock?!1:o.item.id===r.getTargetChart.hoverId),d=D(()=>{const a=o.item.id;return o.item.status.lock?!1:r.getTargetChart.selectId.find(n=>n===a)}),p=D(()=>o.item.status.lock),f=D(()=>o.item.status.hide);return(a,n)=>(y(),P("div",{class:ne(["go-shape-box",{lock:p.value,hide:f.value}])},[Ve(a.$slots,"default",{},void 0,!0),e.hiddenPoint?_e("",!0):(y(!0),P(ae,{key:0},ie(d.value?s:[],(u,c)=>(y(),P("div",{class:ne(`shape-point ${u}`),key:c,style:q(l(io)(u,c,e.item.attr,v)),onMousedown:_=>l(lo)(_,u,e.item.attr)},null,46,uo))),128)),$("div",{class:"shape-modal",style:q(l(le)(e.item.attr))},[$("div",{class:ne(["shape-modal-select",{active:d.value}])},null,2),$("div",{class:ne(["shape-modal-change",{selectActive:d.value,hoverActive:h.value}])},null,2)],4)],2))}});const Ge=ee(po,[["__scopeId","data-v-25c3c11c"]]),fo={class:"go-edit-group-box"},vo=Z({__name:"index",props:{groupData:{type:Object,required:!0},groupIndex:{type:Number,required:!0}},setup(e){const o=te(),{handleContextMenu:t}=qe(),{mouseenterHandle:r,mouseleaveHandle:s,mousedownHandle:v,mouseClickHandle:i}=mt(),h=(f,a,n)=>{const u=c=>a.filter(_=>c.includes(_.key));if(o.getTargetChart.selectId.length>1)return u([J.GROUP,J.DELETE]);{const c=[];n.status.lock?c.push(J.LOCK):c.push(J.UNLOCK),n.status.hide?c.push(J.HIDE):c.push(J.SHOW);const _=[J.UN_GROUP];return[...u(_),zt(),...f.filter(x=>!c.includes(x.key))]}},d=D(()=>dt(o.getEditCanvasConfig.chartCustomThemeColorInfo)[o.getEditCanvasConfig.chartThemeColor]),p=D(()=>o.getEditCanvasConfig.chartThemeSetting);return(f,a)=>(y(),P("div",fo,[(y(),B(l(Ge),{key:e.groupData.id,"data-id":e.groupData.id,index:e.groupIndex,item:e.groupData,hiddenPoint:!0,class:ne(l(Xe)(e.groupData.styles.animations)),style:q(H(H(H(H(H({},l(Le)(e.groupData.attr,e.groupIndex)),l(le)(e.groupData.attr)),l(Ee)(e.groupData.styles)),l(Ne)(e.groupData.styles)),l(pt)(e.groupData.styles))),onClick:a[0]||(a[0]=n=>l(i)(n,e.groupData)),onMousedown:a[1]||(a[1]=n=>l(v)(n,e.groupData)),onMouseenter:a[2]||(a[2]=n=>l(r)(n,e.groupData)),onMouseleave:a[3]||(a[3]=n=>l(s)(n,e.groupData)),onContextmenu:a[4]||(a[4]=n=>l(t)(n,e.groupData,h))},{default:T(()=>[(y(!0),P(ae,null,ie(e.groupData.groupList,n=>(y(),B(l(Ge),{key:n.id,"data-id":n.id,index:e.groupIndex,item:n,hiddenPoint:!0,style:q(H({},l(Le)(n.attr,e.groupIndex)))},{default:T(()=>[(y(),B(de(n.chartConfig.chartKey),{class:ne(["edit-content-chart",l(Xe)(n.styles.animations)]),chartConfig:n,themeSetting:p.value,themeColor:d.value,style:q(H(H(H({},l(le)(n.attr)),l(Ee)(n.styles)),l(Ne)(n.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","item","style"]))),128))]),_:1},8,["data-id","index","item","class","style"]))]))}}),ho={class:"go-edit-align-line"},_o=Z({__name:"index",setup(e){me(c=>({"2a25621e":i.value}));const o=Ce(),t=te(),r=ft(),s=We({lineArr:["rowt","rowc","rowb","coll","colc","colr"],select:new Map,sorptioned:{x:!1,y:!1}}),v=c=>c?{left:`${c.x?c.x:0}px`,top:`${c.y?c.y:0}px`}:{},i=D(()=>o.getAppTheme),h=D(()=>r.getChartAlignRange),d=D(()=>t.getEditCanvas[W.IS_DRAG]),p=(c,_)=>Math.abs(c-_)<=h.value,f=D(()=>t.getTargetChart.selectId),a=D(()=>t.getComponentList[t.fetchTargetIndex()]),n=D(()=>{var c;return((c=a.value)==null?void 0:c.attr)||{}}),u=D(()=>({id:"0",attr:{w:et(t.getEditCanvasConfig.width),h:et(t.getEditCanvasConfig.height),x:0,y:0,offsetX:0,offsetY:0,zIndex:0}}));return ce(()=>t.getMousePosition,vt(()=>{try{if(!d.value||f.value.length!==1)return;const c=n.value.w,_=n.value.h,x=n.value.x,S=x+c/2,L=x+c,E=[x,S,L],b=n.value.y,Y=b+_/2,K=b+_,oe=[b,Y,K];s.select.clear(),s.sorptioned.y=!1;const A=t.getComponentList.map(m=>({id:m.id,attr:m.attr}));A.push(u.value),s.lineArr.forEach(m=>{A.forEach(I=>{if(f.value[0]===I.id)return;const g=I.attr.w,M=I.attr.h,R=I.attr.x,V=R+g/2,U=R+g,ye=[R,V,U],z=I.attr.y,j=z+M/2,Q=z+M,Je=[z,j,Q];m.includes("rowt")&&(p(b,z)&&(s.select.set(m,{y:z}),N(a.value,x,z)),p(b,j)&&(s.select.set(m,{y:j}),N(a.value,x,j)),p(b,Q)&&(s.select.set(m,{y:Q}),N(a.value,x,Q))),m.includes("rowc")&&(p(Y,z)&&(s.select.set(m,{y:z}),N(a.value,x,z-_/2)),p(Y,j)&&(s.select.set(m,{y:j}),N(a.value,x,j-_/2)),p(Y,Q)&&(s.select.set(m,{y:Q}),N(a.value,x,Q-_/2))),m.includes("rowb")&&(p(K,z)&&(s.select.set(m,{y:z}),N(a.value,x,z-_)),p(K,j)&&(s.select.set(m,{y:j}),N(a.value,x,j-_)),p(K,Q)&&(s.select.set(m,{y:Q}),N(a.value,x,Q-_))),m.includes("coll")&&(p(x,R)&&(s.select.set(m,{x:R}),N(a.value,R,b)),p(x,V)&&(s.select.set(m,{x:V}),N(a.value,V,b)),p(x,U)&&(s.select.set(m,{x:U}),N(a.value,U,b))),m.includes("colc")&&(p(S,R)&&(s.select.set(m,{x:R}),N(a.value,R-c/2,b)),p(S,V)&&(s.select.set(m,{x:V}),N(a.value,V-c/2,b)),p(S,U)&&(s.select.set(m,{x:U}),N(a.value,U-c/2,b))),m.includes("colr")&&(p(L,R)&&(s.select.set(m,{x:R}),N(a.value,R-c,b)),p(L,V)&&(s.select.set(m,{x:V}),N(a.value,V-c,b)),p(L,U)&&(s.select.set(m,{x:U}),N(a.value,U-c,b)))})})}catch(c){console.log(c)}},200),{deep:!0}),ce(()=>d.value,c=>{c||(s.select.clear(),s.sorptioned.y=!1)}),(c,_)=>(y(),P("div",ho,[(y(!0),P(ae,null,ie(s.lineArr,x=>(y(),P("div",{class:ne(["line",[x.includes("row")?"row":"col",s.select.has(x)&&"visible"]]),key:x,style:q(v(s.select.get(x)))},null,6))),128))]))}});const go=ee(_o,[["__scopeId","data-v-792c43f5"]]),mo=Z({__name:"index",setup(e){return(o,t)=>{const r=O("n-watermark");return y(),B(r,{id:"go-edit-watermark",content:l(Mt),cross:"",selectable:"","font-size":16,"line-height":16,width:500,height:150,"x-offset":12,"y-offset":80,rotate:-15},null,8,["content"])}}});const Co=ee(mo,[["__scopeId","data-v-15e7d440"]]),Ct=e=>(Me("data-v-fd03a995"),e=e(),De(),e),yo=Ct(()=>$("div",{class:"select-background"},null,-1)),So=Ct(()=>$("div",{class:"select-border"},null,-1)),To=[yo,So],wo=Z({__name:"index",setup(e){me(h=>({"3a6a09b6":v.value}));const o=Ce(),t=te(),{isSelect:r,scale:s}=ke(t.getEditCanvas),v=D(()=>o.getAppTheme),i=G();return ce(()=>t.getMousePosition,h=>{if(!r.value)return;const{startX:d,startY:p,x:f,y:a}=h,n={zIndex:tt,x:0,y:0,w:0,h:0,offsetX:0,offsetY:0};f>d&&a>p?(n.x=d,n.y=p,n.w=Math.round((f-d)/s.value),n.h=Math.round((a-p)/s.value)):f>d&&a<p?(n.x=d,n.w=Math.round((f-d)/s.value),n.h=Math.round((p-a)/s.value),n.y=p-n.h):f<d&&a>p?(n.y=p,n.w=Math.round((d-f)/s.value),n.h=Math.round((a-p)/s.value),n.x=d-n.w):(n.w=Math.round((d-f)/s.value),n.h=Math.round((p-a)/s.value),n.x=d-n.w,n.y=p-n.h),i.value=H(H({},Le(n,tt)),le(n))},{deep:!0}),(h,d)=>l(r)?(y(),P("div",{key:0,class:"go-edit-select",style:q(i.value)},To,4)):_e("",!0)}});const xo=ee(wo,[["__scopeId","data-v-fd03a995"]]),Eo=Z({__name:"index",setup(e){const o=te(),{getEditCanvasConfig:t,getEditCanvas:r}=ke(o),s=D(()=>({w:t.value.width,h:t.value.height})),v=D(()=>{const h={transform:`scale(${r.value.scale})`};return H(H({},le(s.value)),h)}),i=D(()=>{const h=r.value.isCreate&&{"z-index":99999};return H(H({},le(s.value)),h)});return(h,d)=>(y(),P("div",{class:"go-edit-range go-transition",style:q(v.value),onMousedown:d[0]||(d[0]=p=>l(co)(p,void 0))},[Ve(h.$slots,"default",{},void 0,!0),w(l(Co)),w(l(go)),w(l(xo)),$("div",{class:"go-edit-range-model",style:q(i.value)},null,4)],36))}});const bo=ee(Eo,[["__scopeId","data-v-d34efa6e"]]),yt=!!(typeof window!="undefined"&&window.document&&window.document.createElement);var Ke=!1,Fe=!1;try{var Ae={get passive(){return Ke=!0},get once(){return Fe=Ke=!0}};yt&&(window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,!0))}catch(e){}function Lo(e,o,t,r){if(r&&typeof r!="boolean"&&!Fe){var s=r.once,v=r.capture,i=t;!Fe&&s&&(i=t.__once||function h(d){this.removeEventListener(o,h,v),t.call(this,d)},t.__once=i),e.addEventListener(o,i,Ke?r:v)}e.addEventListener(o,t,r)}function ko(e,o,t,r){var s=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(o,t,s),t.__once&&e.removeEventListener(o,t.__once,s)}function rt(e,o,t,r){return Lo(e,o,t,r),function(){ko(e,o,t,r)}}var ct=new Date().getTime();function Mo(e){var o=new Date().getTime(),t=Math.max(0,16-(o-ct)),r=setTimeout(e,t);return ct=o,r}var Do=["","webkit","moz","o","ms"],lt=Mo,it=function(o,t){return o+(o?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};yt&&Do.some(function(e){var o=it(e,"request");return o in window&&(it(e,"cancel"),lt=function(r){return window[o](r)}),!!lt});Function.prototype.bind.call(Function.prototype.call,[].slice);Function.prototype.bind.call(Function.prototype.call,[].slice);const $o={class:"go-sketch-rule"},Io={key:1,class:"fix-edit-screens-block"},Pe=20,Ro=Z({__name:"index",setup(e){me(g=>({"68cf994b":b.value,"117fb376":L.value,e7cb282c:a.value}));const o=te(),t=ht(),r=Ce();let s=[0,0],v=[0,0];const i=G(),h=G(!0),d=G(),p=G(),f=G(!1),a=G("auto"),{width:n,height:u}=ke(o.getEditCanvasConfig),c=G(0),_=G(0),x=We({h:[],v:[]}),S=D(()=>o.getEditCanvas.scale),L=D(()=>`${u.value*2}px`),E=D(()=>r.getDarkTheme?{bgColor:"#18181c",longfgColor:"#4d4d4d",shortfgColor:"#4d4d4d",fontColor:"#4d4d4d",shadowColor:"#18181c",borderColor:"#18181c",cornerActiveColor:"#18181c"}:{}),b=D(()=>r.getAppTheme),Y=g=>{if(g.ctrlKey||g.metaKey){g.preventDefault();let M=S.value;if(g.wheelDelta>=0&&S.value<2){M=S.value+.05,o.setScale(M);return}g.wheelDelta<0&&S.value>.1&&(M=S.value-.05,o.setScale(M))}},K=()=>{if(!i.value)return;const g=i.value.getBoundingClientRect(),M=d.value.getBoundingClientRect();c.value=(g.left+Pe-M.left)/S.value,_.value=(g.top+Pe-M.top)/S.value},oe=g=>{var ye,z;if(g.preventDefault(),g.stopPropagation(),g.which==2)f.value=!0;else if(!((ye=window.$KeyboardActive)!=null&&ye.space))return;(z=document.activeElement)==null||z.blur();const M=g.pageX,R=g.pageY,V=rt(window,"mousemove",j=>{const Q=j.pageX-M,Je=j.pageY-R,[$e,Se]=s,[Ie,Te]=v;s=[Se,Q],v=[Te,Je],i.value.scrollLeft-=Se>$e?Math.abs(Se-$e):-Math.abs(Se-$e),i.value.scrollTop-=Te>Ie?Math.abs(Te-Ie):-Math.abs(Te-Ie)}),U=rt(window,"mouseup",()=>{V(),U(),s=[0,0],v=[0,0],f.value=!1})},A=()=>{const g=document.getElementById("go-chart-edit-layout");return g?{height:g.clientHeight-25,width:g.clientWidth}:{width:n.value,height:u.value}},m=()=>{h.value=!1,setTimeout(()=>{h.value=!0},10)},I=()=>{const{width:g,height:M}=p.value.getBoundingClientRect(),{width:R,height:V}=A();i.value.scrollLeft=g/2-R/2,i.value.scrollTop=M/2-V/2};return ce(()=>r.getDarkTheme,()=>{m()}),ce(()=>S.value,(g,M)=>{M!==g&&t.getRePositionCanvas?(t.setItemUnHandle(_t.RE_POSITION_CANVAS,!1),K(),setTimeout(()=>{I(),m()},400)):vt(m,20)}),ce(()=>f.value,g=>{a.value=g?"grab":"auto"}),ze(()=>{i.value&&(i.value.addEventListener("wheel",Y,{passive:!1}),I())}),ut(()=>{i.value&&i.value.removeEventListener("wheel",Y)}),window.onKeySpacePressHold=g=>{f.value=g},(g,M)=>{const R=O("sketch-rule");return y(),P("div",$o,[h.value?(y(),B(R,{key:0,thick:Pe,scale:S.value,width:A().width,height:A().height,startX:c.value,startY:_.value,lines:x,palette:E.value},null,8,["scale","width","height","startX","startY","lines","palette"])):_e("",!0),$("div",{ref_key:"$app",ref:i,class:"edit-screens",onScroll:K},[$("div",{ref_key:"$container",ref:p,class:"edit-screen-container",style:q({width:l(n)*2+"px"})},[$("div",{ref_key:"refSketchRuleBox",ref:d,class:"canvas",onMousedown:oe,style:q({marginLeft:"-"+(A().width/2-25)+"px"})},[$("div",{style:q({pointerEvents:f.value?"none":"auto"})},[Ve(g.$slots,"default",{},void 0,!0)],4)],36)],4)],544),l(r).getDarkTheme?(y(),P("div",Io)):_e("",!0)])}}});const Oo=ee(Ro,[["__scopeId","data-v-c504d30f"]]),Ye={[k.ADD]:"æ–°å¢ž",[k.DELETE]:"åˆ é™¤",[k.UPDATE]:"æ›´æ–°",[k.MOVE]:"ç§»åŠ¨",[k.PASTE]:"ç²˜è´´",[k.COPY]:"å¤åˆ¶",[k.CUT]:"å‰ªåˆ‡",[k.TOP]:"ç½®é¡¶",[k.BOTTOM]:"ç½®åº•",[k.UP]:"ä¸Šç§»",[k.DOWN]:"ä¸‹ç§»",[k.GROUP]:"æˆç»„",[k.UN_GROUP]:"è§£ç»„",[k.LOCK]:"é”å®š",[k.UNLOCK]:"è§£é”",[k.HIDE]:"éšè—",[k.SHOW]:"æ˜¾ç¤º",[xe.CANVAS]:"ç”»å¸ƒåˆå§‹åŒ–"};var Uo=Array.prototype,Ho=Uo.reverse;function Ao(e){return e==null?e:Ho.call(e)}var Po=Ao;const Yo=Dt(Po),St=e=>(Me("data-v-5a6ac549"),e=e(),De(),e),Bo={class:"go-flex-items-center"},Xo=St(()=>$("span",{class:"btn-text"},"åŽ†å²è®°å½•",-1)),No={class:"history-list-box"},Go=["title"],Ko=St(()=>$("div",{class:"popover-modal"},null,-1)),Fo=Z({__name:"index",setup(e){const{DesktopOutlineIcon:o,PencilIcon:t,TrashIcon:r,CopyIcon:s,LayersIcon:v,DuplicateIcon:i,HelpOutlineIcon:h,LockClosedOutlineIcon:d,LockOpenOutlineIcon:p,EyeOffOutlineIcon:f,EyeOutlineIcon:a}=pe.ionicons5,{StackedMoveIcon:n,Carbon3DCursorIcon:u,Carbon3DSoftwareIcon:c}=pe.carbon,_=Vt(),x=E=>{if(E.targetType===xe.CANVAS)return o;switch(E.actionType){case k.UPDATE:return t;case k.DELETE:return r;case k.PASTE:return s;case k.TOP:return v;case k.BOTTOM:return v;case k.UP:return v;case k.DOWN:return v;case k.MOVE:return n;case k.ADD:return i;case k.GROUP:return u;case k.UN_GROUP:return c;case k.LOCK:return d;case k.UNLOCK:return p;case k.HIDE:return f;case k.SHOW:return a;default:return t}},S=E=>{if(E.targetType===xe.CANVAS)return Ye[xe.CANVAS];if(E.actionType===k.GROUP||E.actionType===k.UN_GROUP)return`${Ye[E.actionType]}`;if(E.historyData.length)return`${Ye[E.actionType]} - ${E.historyData[0].chartConfig.title}`},L=D(()=>{const b=_.getBackStack.map(Y=>({label:S(Y),icon:x(Y)}));return Yo(b.filter(Y=>Y.label))});return(E,b)=>{const Y=O("n-button"),K=O("n-icon"),oe=O("n-text"),A=O("n-scrollbar"),m=O("n-popover"),I=O("n-tooltip");return y(),P("div",Bo,[w(m,{class:"edit-history-popover","show-arrow":!1,size:"small",trigger:"click",placement:"top-start"},{trigger:T(()=>[w(Y,{class:"mr-10",secondary:"",size:"small",disabled:L.value.length===0},{default:T(()=>[Xo]),_:1},8,["disabled"])]),default:T(()=>[$("div",No,[w(A,{style:{"max-height":"500px"}},{default:T(()=>[(y(!0),P(ae,null,ie(L.value,(g,M)=>(y(),P("div",{class:"list-item go-flex-items-center go-ellipsis-1",key:M,title:g.label},[w(K,{class:"item-icon",size:"16",depth:2,component:g.icon},null,8,["component"]),w(oe,{depth:"2"},{default:T(()=>[ge(se(g.label),1)]),_:2},1024)],8,Go))),128))]),_:1}),Ko])]),_:1}),w(I,{trigger:"hover"},{trigger:T(()=>[w(K,{size:"21",depth:3},{default:T(()=>[w(l(h))]),_:1})]),default:T(()=>[$("span",null,"æœ€å¤šåªä¿ç•™"+se(l($t))+"æ¡è®°å½•",1)]),_:1})])}}});const zo=ee(Fo,[["__scopeId","data-v-5a6ac549"]]),je=e=>(Me("data-v-f19379a6"),e=e(),De(),e),Vo=je(()=>$("th",null,"åŠŸèƒ½",-1)),Wo=je(()=>$("th",null,"Win å¿«æ·é”®",-1)),qo=je(()=>$("span",null," Mac å¿«æ·é”® ",-1)),jo={key:0},Jo={key:1},Zo=Z({__name:"ShortcutKeyModal",props:{modelShow:Boolean},emits:["update:modelShow"],setup(e,{emit:o}){const t=e,{CloseIcon:r}=pe.ionicons5,s=G(!1);ce(()=>t.modelShow,h=>{s.value=h});const v=[{label:"æ‹–æ‹½ç”»å¸ƒ",win:`${X.SPACE.toUpperCase()} + ðŸ–±ï¸ `,mac:`${F.SPACE.toUpperCase()} + ðŸ–±ï¸ `,macSource:!0},{label:"å‘ ä¸Š/å³/ä¸‹/å·¦ ç§»åŠ¨",win:`${X.CTRL.toUpperCase()} + â†‘ æˆ– â†’ æˆ– â†“ æˆ– â†`,mac:`${F.CTRL.toUpperCase()} + â†‘ `},{label:"é”å®š",win:`${X.CTRL.toUpperCase()} + L `,mac:`${F.CTRL.toUpperCase()} + L `},{label:"è§£é”",win:`${X.CTRL.toUpperCase()} + ${X.SHIFT.toUpperCase()}+ L `,mac:`${F.CTRL.toUpperCase()} + ${F.SHIFT.toUpperCase()} + L `},{label:"å±•ç¤º",win:`${X.CTRL.toUpperCase()} + H `,mac:`${F.CTRL.toUpperCase()} + H `},{label:"éšè—",win:`${X.CTRL.toUpperCase()} + ${X.SHIFT.toUpperCase()} + H `,mac:`${F.CTRL.toUpperCase()} + ${F.SHIFT.toUpperCase()} + H `},{label:"åˆ é™¤",win:"Delete".toUpperCase(),mac:`${F.CTRL.toUpperCase()} + Backspace `},{label:"å¤åˆ¶",win:`${X.CTRL.toUpperCase()} + C `,mac:`${F.CTRL.toUpperCase()} + C `},{label:"å‰ªåˆ‡",win:`${X.CTRL.toUpperCase()} + X `,mac:`${F.CTRL.toUpperCase()} + X `},{label:"ç²˜è´´",win:`${X.CTRL.toUpperCase()} + V `,mac:`${F.CTRL.toUpperCase()} + V `},{label:"åŽé€€",win:`${X.CTRL.toUpperCase()} + Z `,mac:`${F.CTRL.toUpperCase()} + Z `},{label:"å‰è¿›",win:`${X.CTRL.toUpperCase()} + ${X.SHIFT.toUpperCase()} + Z `,mac:`${F.CTRL.toUpperCase()} + ${F.SHIFT.toUpperCase()} + Z `},{label:"å¤šé€‰",win:`${X.CTRL.toUpperCase()} + ðŸ–±ï¸ `,mac:`${F.CTRL_SOURCE_KEY.toUpperCase()} + ðŸ–±ï¸ `},{label:"åˆ›å»ºåˆ†ç»„",win:`${X.CTRL.toUpperCase()} + G / ðŸ–±ï¸ `,mac:`${F.CTRL_SOURCE_KEY.toUpperCase()} + G / ðŸ–±ï¸`},{label:"è§£é™¤åˆ†ç»„",win:`${X.CTRL.toUpperCase()} + ${X.SHIFT.toUpperCase()} + G `,mac:`${F.CTRL_SOURCE_KEY.toUpperCase()} + ${X.SHIFT.toUpperCase()} + G `}],i=()=>{o("update:modelShow",!1)};return(h,d)=>{const p=O("n-icon"),f=O("n-space"),a=O("n-gradient-text"),n=O("n-table"),u=O("n-modal");return y(),B(u,{show:s.value,"onUpdate:show":d[0]||(d[0]=c=>s.value=c),"mask-closable":!0,onAfterLeave:i},{default:T(()=>[w(n,{class:"model-content",bordered:!1,"single-line":!1},{default:T(()=>[$("thead",null,[$("tr",null,[Vo,Wo,$("th",null,[w(f,{justify:"space-between"},{default:T(()=>[qo,w(p,{size:"20",class:"go-cursor-pointer",onClick:i},{default:T(()=>[w(l(r))]),_:1})]),_:1})])])]),$("tbody",null,[(y(),P(ae,null,ie(v,(c,_)=>$("tr",{key:_},[$("td",null,se(c.label),1),$("td",null,se(c.win),1),c.macSource?(y(),P("td",jo,se(c.mac),1)):(y(),P("td",Jo,[w(a,{size:22},{default:T(()=>[ge(se(c.mac.substr(0,1)),1)]),_:2},1024),ge(" + "+se(c.mac.substr(3)),1)]))])),64))])]),_:1})]),_:1},8,["show"])}}});const Qo=ee(Zo,[["__scopeId","data-v-f19379a6"]]),es=e=>(Me("data-v-f48c63d8"),e=e(),De(),e),ts={class:"go-edit-shortcut"},os=es(()=>$("span",null,"å¿«æ·é”®",-1)),ss=Z({__name:"index",setup(e){const{DicomOverlayIcon:o}=pe.carbon,t=G(!1);return(r,s)=>{const v=O("n-icon"),i=O("n-button"),h=O("n-tooltip");return y(),P("div",ts,[w(Qo,{modelShow:t.value,"onUpdate:modelShow":s[0]||(s[0]=d=>t.value=d)},null,8,["modelShow"]),w(h,{trigger:"hover"},{trigger:T(()=>[w(i,{class:"scale-btn",secondary:"",size:"small",onClick:s[1]||(s[1]=d=>t.value=!0)},{default:T(()=>[w(v,{size:"21",depth:3},{default:T(()=>[w(l(o))]),_:1})]),_:1})]),default:T(()=>[os]),_:1})])}}});const ns=ee(ss,[["__scopeId","data-v-f48c63d8"]]),as={class:"go-edit-bottom"},rs=Z({__name:"index",setup(e){me(L=>({"016b4d1d":s.value}));const{LockClosedOutlineIcon:o,LockOpenOutlineIcon:t}=pe.ionicons5,r=Ce(),s=G(r.getAppTheme),v=ht(),i=te(),{lockScale:h,scale:d}=ke(i.getEditCanvas),p=G(null);let f=[{label:"200%",value:200},{label:"150%",value:150},{label:"100%",value:100},{label:"50%",value:50},{label:"è‡ªé€‚åº”",value:0}];const a=G(""),n=L=>{var E;if((E=p.value)==null||E.blur(),L===0){v.setItemUnHandle(_t.RE_POSITION_CANVAS,!0),i.computedScale();return}i.setScale(L/100)},u=()=>{i.setEditCanvas(W.LOCK_SCALE,!h.value)},c=G(100),_=L=>`${L}%`,x=L=>{i.setScale(L/100)},S=We({100:""});return It(()=>{const L=(d.value*100).toFixed(0);a.value=`${L}%`,c.value=parseInt(L)}),(L,E)=>{const b=O("n-text"),Y=O("n-space"),K=O("n-select"),oe=O("n-icon"),A=O("n-button"),m=O("n-tooltip"),I=O("n-slider");return y(),P("div",as,[w(Y,null,{default:T(()=>[w(l(zo)),w(b,{id:"keyboard-dress-show",depth:"3"})]),_:1}),w(Y,{class:"bottom-ri"},{default:T(()=>[w(ns),w(K,{ref_key:"selectInstRef",ref:p,class:"scale-btn",value:a.value,"onUpdate:value":[E[0]||(E[0]=g=>a.value=g),n],size:"mini",disabled:l(h),options:l(f)},null,8,["value","disabled","options"]),w(m,{trigger:"hover"},{trigger:T(()=>[w(A,{onClick:u,text:""},{default:T(()=>[w(oe,{class:ne(["lock-icon",{color:l(h)}]),size:"18",depth:2},{default:T(()=>[l(h)?(y(),B(l(o),{key:0})):(y(),B(l(t),{key:1}))]),_:1},8,["class"])]),_:1})]),default:T(()=>[$("span",null,se(l(h)?"è§£é”":"é”å®š")+"å½“å‰æ¯”ä¾‹",1)]),_:1}),w(I,{class:"scale-slider",value:c.value,"onUpdate:value":[E[1]||(E[1]=g=>c.value=g),x],"default-value":50,min:10,max:200,step:5,"format-tooltip":_,disabled:l(h),marks:S},null,8,["value","disabled","marks"])]),_:1})])}}});const cs=ee(rs,[["__scopeId","data-v-880c3f29"]]),he=te(),ls=()=>{he.setTargetSelectChart(void 0),Rt(Ot(he.getStorageInfo||[]),void 0,"json");const e=document.querySelector(".go-edit-range"),o=document.getElementById("go-edit-watermark");if(!e||!o){window.$message.error("å¯¼å‡ºå¤±è´¥ï¼");return}const t=he.getEditCanvas.scale;he.setScale(1,!0),o.style.display="block",setTimeout(()=>{Ut(e,()=>{o&&(o.style.display="none"),he.setScale(t,!0)})},600)},is=()=>{const e=G(),{updateComponent:o}=oo();return{importUploadFileListRef:e,importBeforeUpload:({file:s})=>{e.value=[];const v=s.file.type;return v!==nt.JSON&&v!==nt.TXT?(window.$message.warning("ä»…æ”¯æŒä¸Šä¼  ã€JSONã€‘ æ ¼å¼æ–‡ä»¶ï¼Œè¯·é‡æ–°ä¸Šä¼ ï¼"),!1):!0},importCustomRequest:s=>{const{file:v}=s;Ht(()=>{v.file?At(v.file).then(i=>{Qt({message:"è¯·é€‰æ‹©å¯¼å…¥æ–¹å¼:",positiveText:"æ–°å¢žï¼ˆå¯æ’¤å›žï¼‰",negativeText:"è¦†ç›–ï¼ˆä¸å¯æ’¤å›žï¼‰",negativeButtonProps:{type:"info",ghost:!1},onPositiveCallback:()=>ue(void 0,null,function*(){try{i=Be(i),yield o(i,!1,!0),window.$message.success("å¯¼å…¥æˆåŠŸï¼")}catch(h){console.log(h),window.$message.error("ç»„ä»¶å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§!")}}),onNegativeCallback:()=>ue(void 0,null,function*(){try{i=Be(i),yield o(i,!0,!0),window.$message.success("å¯¼å…¥æˆåŠŸï¼")}catch(h){console.log(h),window.$message.error("ç»„ä»¶å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶å®Œæ•´æ€§!")}})})}):window.$message.error("å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ•°æ®æˆ–è”ç³»ç®¡ç†å‘˜ï¼")})}}};var re=(e=>(e.BUTTON="button",e.IMPORTUPLOAD="importUpload",e))(re||{});const us={class:"btn-item"},ds=Z({__name:"index",setup(e){const{DownloadIcon:o,ShareIcon:t,PawIcon:r,SettingsSharpIcon:s,CreateIcon:v}=pe.ionicons5,i=ft(),h=te();Pt(),so();let d=null;const p=G(!1),f=G(!0),a=G(!0),{importUploadFileListRef:n,importCustomRequest:u,importBeforeUpload:c}=is(),_=D(()=>i.getChartToolsStatus===ot.ASIDE),x=D(()=>i.getChartToolsStatusHide),S=D(()=>f.value&&x.value),L=D(()=>{if(!_.value)return oe;const A=[];return oe.map(m=>{A.unshift(m)}),A}),E=()=>{d=setTimeout(()=>{f.value&&(f.value=!1,a.value=!0)},200),setTimeout(()=>{a.value=!1},400)},b=()=>{clearTimeout(d),f.value||(f.value=!0)},Y=()=>{window.$message.warning("è¯·é€šè¿‡é¡¶éƒ¨ã€åŒæ­¥å†…å®¹ã€‘æŒ‰é’®åŒæ­¥æœ€æ–°æ•°æ®ï¼"),h.setEditCanvas(W.IS_CODE_EDIT,!0),setTimeout(()=>{const A=Bt(Xt.CHART_EDIT_NAME,"href");if(!A)return;const m=Nt();K(m),Gt(A,[m],void 0,!0)},2e3)},K=A=>{const m=h.getStorageInfo,I=Kt(we.GO_CHART_STORAGE_LIST)||[];if(I!=null&&I.length){const g=I.findIndex(M=>M.id===A);g!==-1?(I.splice(g,1,fe(H({},m),{id:A})),He(we.GO_CHART_STORAGE_LIST,I)):(I.push(fe(H({},m),{id:A})),He(we.GO_CHART_STORAGE_LIST,I))}else He(we.GO_CHART_STORAGE_LIST,[fe(H({},m),{id:A})])},oe=[{key:"import",type:re.IMPORTUPLOAD,name:"å¯¼å…¥",icon:t},{key:"export",type:re.BUTTON,name:"å¯¼å‡º",icon:o,handle:ls},{key:"edit",type:re.BUTTON,name:"ç¼–è¾‘",icon:v,handle:Y},{key:"setting",type:re.BUTTON,name:"è®¾ç½®",icon:s,handle:()=>{p.value=!0}}];return(A,m)=>{const I=O("n-icon"),g=O("n-text"),M=O("n-button"),R=O("n-upload"),V=O("n-tooltip");return y(),P(ae,null,[$("div",{class:ne(["go-chart-edit-tools",[l(i).getChartToolsStatus,S.value?"isMini":"unMini"]]),onClick:m[1]||(m[1]=U=>f.value&&(f.value=!1)),onMouseenter:E,onMouseleave:b},[Oe(w(I,{class:"asideLogo",size:"22"},{default:T(()=>[w(l(r))]),_:1},512),[[Ue,l(i).getChartToolsStatus===l(ot).ASIDE&&S.value]]),(y(!0),P(ae,null,ie(L.value,(U,ye)=>(y(),B(V,{key:U.key,disabled:!_.value||x.value&&a.value,trigger:"hover",placement:"left"},{trigger:T(()=>[$("div",us,[U.type===l(re).BUTTON?(y(),B(M,{key:0,circle:_.value,secondary:"",onClick:U.handle},{icon:T(()=>[_.value?(y(),B(I,{key:0,size:"22"},{default:T(()=>[(y(),B(de(U.icon)))]),_:2},1024)):(y(),B(de(U.icon),{key:1}))]),default:T(()=>[Oe(w(g,{depth:"3"},{default:T(()=>[ge(se(U.name),1)]),_:2},1536),[[Ue,!_.value]])]),_:2},1032,["circle","onClick"])):U.type===l(re).IMPORTUPLOAD?(y(),B(R,{key:1,"file-list":l(n),"onUpdate:fileList":m[0]||(m[0]=z=>Yt(n)?n.value=z:null),"show-file-list":!1,customRequest:l(u),onBeforeUpload:l(c)},{default:T(()=>[w(M,{circle:_.value,secondary:""},{icon:T(()=>[_.value?(y(),B(I,{key:0,size:"22"},{default:T(()=>[(y(),B(de(U.icon)))]),_:2},1024)):(y(),B(de(U.icon),{key:1}))]),default:T(()=>[Oe(w(g,{depth:"3"},{default:T(()=>[ge(se(U.name),1)]),_:2},1536),[[Ue,!_.value]])]),_:2},1032,["circle"])]),_:2},1032,["file-list","customRequest","onBeforeUpload"])):_e("",!0)])]),default:T(()=>[$("span",null,se(U.name),1)]),_:2},1032,["disabled"]))),128))],34),w(l(to),{modelShow:p.value,"onUpdate:modelShow":m[2]||(m[2]=U=>p.value=U)},null,8,["modelShow"])],64)}}});const ps=ee(ds,[["__scopeId","data-v-3649ae11"]]),fs=Z({__name:"index",setup(e){const o=te(),{handleContextMenu:t}=qe();Ft(qt,null),no(()=>ue(this,null,function*(){}));const{mouseenterHandle:r,mouseleaveHandle:s,mousedownHandle:v,mouseClickHandle:i}=mt(),h=(a,n,u)=>{if(o.getTargetChart.selectId.length>1)return n.filter(_=>[J.GROUP,J.DELETE].includes(_.key));const c=[];return u.status.lock?c.push(J.LOCK):c.push(J.UNLOCK),u.status.hide?c.push(J.HIDE):c.push(J.SHOW),a.filter(_=>!c.includes(_.key))},d=D(()=>o.getEditCanvasConfig.chartThemeSetting),p=D(()=>dt(o.getEditCanvasConfig.chartCustomThemeColorInfo)[o.getEditCanvasConfig.chartThemeColor]);D(()=>o.getEditCanvasConfig.filterShow);const f=D(()=>{const a=o.getEditCanvasConfig.background,n=o.getEditCanvasConfig.backgroundImage,_=o.getEditCanvasConfig.selectColor?{background:a||void 0}:{background:`url(${n}) no-repeat center center / cover !important`};return fe(H({},_),{width:"inherit",height:"inherit"})});return ze(()=>{jt()}),(a,n)=>(y(),B(l(eo),{id:"go-chart-edit-layout",flex:!0,showTop:!1,showBottom:!0,depth:1,xScroll:!0,disabledScroll:!0,onMousedown:l(gt),onDrop:l(ro),onDragover:l(at),onDragenter:l(at)},{aside:T(()=>[w(l(ps))]),bottom:T(()=>[w(l(cs))]),default:T(()=>[w(l(Oo),null,{default:T(()=>[$("div",{id:"go-chart-edit-content",onContextmenu:n[0]||(n[0]=(...u)=>l(t)&&l(t)(...u))},[w(l(bo),null,{default:T(()=>[$("div",{style:q(H(H({},l(Ee)(l(o).getEditCanvasConfig)),f.value))},[(y(!0),P(ae,null,ie(l(o).getComponentList,(u,c)=>(y(),P("div",{key:u.id},[u.isGroup?(y(),B(l(vo),{key:0,groupData:u,groupIndex:c},null,8,["groupData","groupIndex"])):(y(),B(l(Ge),{key:1,"data-id":u.id,index:c,style:q(H(H({},l(Le)(u.attr,c)),l(pt)(u.styles))),item:u,onClick:_=>l(i)(_,u),onMousedown:_=>l(v)(_,u),onMouseenter:_=>l(r)(_,u),onMouseleave:_=>l(s)(_,u),onContextmenu:_=>l(t)(_,u,h)},{default:T(()=>[(y(),B(de(u.chartConfig.chartKey),{class:ne(["edit-content-chart",l(Xe)(u.styles.animations)]),chartConfig:u,themeSetting:d.value,themeColor:p.value,style:q(H(H(H({},l(le)(u.attr)),l(Ee)(u.styles)),l(Ne)(u.styles)))},null,8,["class","chartConfig","themeSetting","themeColor","style"]))]),_:2},1032,["data-id","index","style","item","onClick","onMousedown","onMouseenter","onMouseleave","onContextmenu"]))]))),128))],4)]),_:1})],32)]),_:1})]),_:1},8,["onMousedown","onDrop","onDragover","onDragenter"]))}});const Us=ee(fs,[["__scopeId","data-v-42958d99"]]);export{Us as default};
